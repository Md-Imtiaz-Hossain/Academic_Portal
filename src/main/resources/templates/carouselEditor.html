<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update Carousel</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
    <link rel="stylesheet" href="/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/dist/css/adminlte.min.css">
    <!-- Bootstrap 5.0 -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}" >
    <!--  Custom  -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/custom.css}" >
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">

        <!-- Left navbar links -->
        <ul th:replace="fragments-list::leftNavbar"></ul>

        <!-- Right navbar links -->
        <ul th:replace="fragments-list::rightNavbar"></ul>

    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">

        <!-- Brand Logo -->
        <a th:replace="fragments-list::brandLogo"></a>

        <!-- Sidebar -->
        <div class="sidebar">

            <!-- Sidebar user panel (optional) -->
            <div th:replace="fragments-list::sidebarUserPanel"></div>

            <!-- SidebarSearch Form -->
            <div th:replace="fragments-list::sidebarSearchForm"></div>

            <!-- Sidebar Menu -->
            <nav th:replace="fragments-list::sidebarMenu"></nav>
            <!-- /.sidebar-menu -->

        </div>
        <!-- /.sidebar -->
    </aside>


    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="container-fluid">
            <div class="px-lg-5">

                <!-- Title -->
                <div class="row py-5">
                    <div class="col-lg-12 mx-auto">
                        <div class="text-white p-5 shadow-sm rounded"
                             style="background: #a770ef;
                             background: -webkit-linear-gradient(to right, #a770ef, #cf8bf3, #fdb99b);
                             background: linear-gradient(to right, #a770ef, #cf8bf3, #fdb99b);">
                            <h1 class="display-4">Carousel Editor</h1>
                            <p class="lead">Select which images to show on homepage.(Max upto 10)</p>
                        </div>
                    </div>
                </div>
                <div class="row pb-5">
                    <div class="col-lg-12 mx-auto">
                        <form th:action="'/carousel/update'" method="post">
                            <p class="lead pl-3">Here are the current selected images. Tap on the images to add or remove.</p>

                        <div class="d-flex justify-content-start flex-wrap"
                             style="background: #a770ef;" id="selectedImages">

                        </div>
                            <button class="btn btn-success" type="submit" style="position:absolute; right: 3%; bottom: 5%">Save me</button>
                        </form>
                    </div>
                </div>
                <!-- End -->
                <div class="row">
                    <div class="col-xl-3 col-lg-4 col-md-6 mb-4 customImageCard" th:each="image : ${images}" th:attr="onclick=${'addImageToSelected('+''''+ image.path + '''' +  ',' + image.id+')'}">
                        <div class="bg-white rounded shadow-sm h-100  image">
                            <div style="display: flex; justify-content: center; align-items: center; width: 100%; height: 300px; border:solid">
                                <img th:src="'../'+${image.path}" alt="" class="img-fluid card-img-top" style=" width: auto;max-height: 100%;">
                            </div>

                            <div class="p-4 d-flex flex-column justify-content-end">
                                <h5 th:text="${image.heading}"></h5>
                                <p class="small text-muted mb-0" th:text="${image.description}"></p>
                            </div>
                        </div>
                        <div class="middle">
                            <div class="text">Add</div>
                        </div>
                    </div>
                </div>
        <!-- /.content -->
        </div>
    </div>
    </div>
    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
        <div class="p-3">
            <h5>Title</h5>
            <p>Sidebar content</p>
        </div>
    </aside>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <footer class="main-footer">
        <!-- To the right -->
        <div class="float-right d-none d-sm-inline">
            Anything you want
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2014-2021 <a href="#">XYZ Student Portal</a>.</strong> All rights reserved.
    </footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script src="/plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 5 -->
<<script th:src="@{/js/bootstrap.bundle.js}"></script>
<!-- DataTables  & Plugins -->
<script src="/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="/plugins/jszip/jszip.min.js"></script>
<script src="/plugins/pdfmake/pdfmake.min.js"></script>
<script src="/plugins/pdfmake/vfs_fonts.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App-->
<script src="/dist/js/adminlte.min.js"></script>

<!-- Page specific script -->
<script>
    let l = 0;

    function addImageToSelected(path, id){
        let f = document.getElementById("selectedImages");
        let n = document.createElement('div');
        n.id = "image" + id + Math.floor(Math.random()*10000);
        n.setAttribute("onclick", "removeImage("+n.id+")");
        n.innerHTML =`<div class="customImageCard" style="position: relative"><img src="../` + path +`" class="rounded-circle p-2 image"  style="width: auto; height: 150px">
                          <div class="middle">
                                    <div class="text" style="background: none">Remove</div>
                          </div>

                      <input value=` + id + ` name="imageList" hidden></div>`;

        f.appendChild(n);
        // document.getElementById(n.id).onclick = removeImage(n.id);
    }

    function removeImage(id){
        // let f = document.getElementById(id);
        id.remove();
        // f.remove();
    }
</script>
</body>
</html>
